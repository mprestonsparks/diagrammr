@startuml
title User Submission to UML Diagram Generation Sequence

actor User
participant "FlaskApp" as Flask
participant "Logger" as Log
participant "Request" as Req
database "JSONData" as JSON
participant "Load_Dotenv" as Env
participant "OpenAI" as OpenAI
participant "Repo" as Repo
participant "Retrieve_Code" as Retrieve
participant "Generate_UML_Diagram" as GenUML
participant "OS/Tempfile" as OS

User -> Flask: Submit Repo URL
Flask -> Log: Initialize Logging
Flask -> Req: Parse Request
Req -> JSON: Extract Data Fields
JSON -> Req: Return Extracted Data
Req -> Env: Load Environment Variables
Env -> OS: Get API Key
OS -> OpenAI: Set API Key
Req -> Repo: Clone Repository
Repo -> Retrieve: Retrieve Code
Retrieve -> GenUML: Request UML Generation
GenUML -> OpenAI: Generate UML Diagram
OpenAI -> GenUML: Return UML Content
GenUML -> OS: Save UML Diagram
OS -> User: Return Saved UML Diagram Path
@enduml
